# -*- coding: utf-8 -*-

from kivy.app import App
from kivy.clock import Clock
from kivy.properties import ObjectProperty
from kivy.uix.screenmanager import Screen

from kivy.garden.mapview import MapMarker

import trip
import concurrent.futures
import time
import webbrowser
import threading

waypoint_logos = {'restaurant': 'food-fork-drink', 'cafe': 'coffee', 'bar': 'glass-wine', 'bowling_alley': 'bowling', 'amusement_park': 'ferris-wheel', 'casino': 'cards-playing-outline', 'spa': 'spa-outline', 'night_club': 'party-popper', 'movie_theater': 'theater', 'tourist_attraction': 'camera-outline', 'art_gallery': 'image-frame', 'aquarium': 'jellyfish-outline'}

class Waypoint(MapMarker):
    pass

class RoutePage(Screen):
    map = ObjectProperty(None)

    def generate(self):

        executor = concurrent.futures.ThreadPoolExecutor(max_workers=2)
        executor.submit(self.show_loading_page)

        # f2 = executor.submit(self.test_function)

        trip_details = []
        f2 = executor.submit(trip.generate_trip, trip_details)
        
        def callback(future, *args):
            self.show_route_page(trip_details)

        f2.add_done_callback(callback) 

    def show_route_page(self, trip_details):
        app = App.get_running_app()
        app.root.windows.current = app.root.routepage.name
        self.map.center_on(app.user_info.lat, app.user_info.lon)

        waypoints = trip_details[0]
        url       = trip_details[1]
        route     = trip_details[2]
        
        if not route:
            app.root.windows.return_homepage()

        for point in waypoints:             # a 'point' is e.g. {'restaurant': json_place}
            place_type = next(iter(point))
            point = point[place_type]
            lat = point['geometry']['location']['lat']
            lon = point['geometry']['location']['lng']
            m   = Waypoint(lat=lat, lon=lon)

            if place_type in waypoint_logos:
                m.ids.logo.icon = waypoint_logos[place_type]

            self.map.add_marker(m)

        # sw_bounds = route['bounds']['southwest']
        # ne_bounds = route['bounds']['northeast']

        # route_area_center_lat = (sw_bounds['lat'] + ne_bounds['lat']) / 2
        # route_area_center_lon = (sw_bounds['lng'] + ne_bounds['lng']) / 2

        # for zoom in reversed(range(20)): 
        #     self.map.set_zoom_at(zoom)
        # x1, y1, x2, y2 = self.map.get_bbox()

        webbrowser.open(url)

    def show_loading_page(self, *args):
        app = App.get_running_app()

        app.root.homepage.dialog.dismiss()
        app.root.windows.current = app.root.loadingpage.name

    def test_function(self):
        time.sleep(1)
        url = 'https://www.google.com/maps/dir/42.360674,-71.06514/Banana+Republic/New+England+Aquarium/USS+Constitution+Museum/Target/Lids/Aldo+shoes/Walgreens/ImprovBoston/OBERON+-+American+Repertory+Theater/John+F.+Kennedy+Presidential+Library+and+Museum/@42.3584918,-71.112128,13z/data=!3m1!4b1!4m63!4m62!1m0!1m5!1m1!1s0x89e37086357ded57:0xfd176d6b47620017!2m2!1d-71.0530198!2d42.3600831!1m5!1m1!1s0x89e3707d60bfd085:0xdda63d8ad6157d49!2m2!1d-71.0497542!2d42.3591346!1m5!1m1!1s0x89e370f4778a4f39:0xa5c2057045470ca5!2m2!1d-71.0554239!2d42.3739796!1m5!1m1!1s0x89e3711765282e5b:0x3cc3f80f619ab266!2m2!1d-71.0723234!2d42.3987431!1m5!1m1!1s0x89e370bd01a4d99f:0x10ce7165d94445f8!2m2!1d-71.0759296!2d42.3683819!1m5!1m1!1s0x89e370bdb477a1db:0x559527e776001cc7!2m2!1d-71.0761474!2d42.3681484!1m5!1m1!1s0x89e3774bef729a9f:0x99b0e1c13fa599f6!2m2!1d-71.1025355!2d42.3747406!1m5!1m1!1s0x89e3775160315d8b:0xd66f508808c67566!2m2!1d-71.103323!2d42.366083!1m5!1m1!1s0x89e3775b4fcd46f7:0x31e84a2b76e4df64!2m2!1d-71.114332!2d42.3709361!1m5!1m1!1s0x89e37ae468290749:0x911b0e0aaf975e24!2m2!1d-71.0342146!2d42.316274!3e0'

        waypoints = [{'clothing_store': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.3600831, 'lng': -71.0530198}, 'viewport': {'northeast': {'lat': 42.3610905802915, 'lng': -71.05175241970849}, 'southwest': {'lat': 42.3583926197085, 'lng': -71.0544503802915}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '57befe1edde9c156e4bcd0c8c11676d4e818d00a', 'name': 'Banana Republic', 'opening_hours': {'open_now': True}, 'photos': [{'height': 1520, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/104701845955524637324">Tim Hannafin</a>'], 'photo_reference': 'CmRaAAAA4dHoaxaUrzqhmfPvG3hXyuH23JDZu615ijuIMGTArPpevHIUeYJUZDquLkN2Lifbc_5Wb_E03z-fkXe4uKBBCjsJcthfXp_whcBoY6s_2mxrLG4LCjzrPvqmzQRiRqpAEhDvJbwNTksbyTqmrLqQrw1jGhTLcEpiyxXkZV73a8f4A_10hIN5Qw', 'width': 2688}], 'place_id': 'ChIJV-19NYZw44kRFwBiR2ttF_0', 'plus_code': {'compound_code': '9W6W+2Q Boston, Massachusetts, United States', 'global_code': '87JC9W6W+2Q'}, 'price_level': 3, 'rating': 4.3, 'reference': 'ChIJV-19NYZw44kRFwBiR2ttF_0', 'scope': 'GOOGLE', 'types': ['clothing_store', 'point_of_interest', 'store', 'establishment'], 'user_ratings_total': 38, 'vicinity': '200 State Street, Boston'}}, {'wildlife': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.3591346, 'lng': -71.0497542}, 'viewport': {'northeast': {'lat': 42.36041172989272, 'lng': -71.04887007010728}, 'southwest': {'lat': 42.35771207010728, 'lng': -71.05156972989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': 'cf2582c03cd48d1a09c4ea87b75040ab52229b85', 'name': 'New England Aquarium', 'opening_hours': {'open_now': False}, 'photos': [{'height': 2592, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/112176888547726699416">Justin Packard</a>'], 'photo_reference': 'CmRaAAAAFs8P9eqx4zSWIg12_E3Mke03S-Z03SM3p35wAJ5QG5LJF4jLcuZ-c_uJmnXMJTSUMi3N5N2rIsc5oWGlXFQKq8mSdka9XeWgSv9zefHGjD2kvCD3va4Bh67e-Ipz1bP2EhCOCIGZQdBzRhuUNrySTX66GhSarwS_hiw_iW6Tt2zJ8fbphq74oA', 'width': 4608}], 'place_id': 'ChIJhdC_YH1w44kRSX0V1oo9pt0', 'plus_code': {'compound_code': '9X52+M3 Boston, Massachusetts, United States', 'global_code': '87JC9X52+M3'}, 'price_level': 2, 'rating': 4.4, 'reference': 'ChIJhdC_YH1w44kRSX0V1oo9pt0', 'scope': 'GOOGLE', 'types': ['aquarium', 'tourist_attraction', 'point_of_interest', 'establishment'], 'user_ratings_total': 13936, 'vicinity': '1 Central Wharf, Boston'}}, {'museum': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.3739796, 'lng': -71.0554239}, 'viewport': {'northeast': {'lat': 42.3755096302915, 'lng': -71.05391396970849}, 'southwest': {'lat': 42.3728116697085, 'lng': -71.0566119302915}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/museum-71.png', 'id': '5677ee7f000c75b2aa63cbd28b6875a9a1c107b8', 'name': 'USS Constitution Museum', 'photos': [{'height': 1673, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/110052817295958474375">Koldo Tellitu</a>'], 'photo_reference': 'CmRaAAAAOj1PlUgJ_HuqrI0beyaPlQb06nEKbN9QqKmm034MtSfQVTa8li_ptnqEtfbM2XSKgoOajs3dV8ECo9JLflCevwutK3SgJyKHV-ZjxUJwwhUPS3Q8nOI0CJBxGUYZYuzsEhAyNqzTnIPaVOQIsNqqS3biGhSC84MnqD6X3ShIjxYgk2aLg6ULXA', 'width': 1520}], 'place_id': 'ChIJOU-Kd_Rw44kRpQxHRXAFwqU', 'plus_code': {'compound_code': '9WFV+HR Charlestown, Boston, MA, United States', 'global_code': '87JC9WFV+HR'}, 'price_level': 0, 'rating': 4.7, 'reference': 'ChIJOU-Kd_Rw44kRpQxHRXAFwqU', 'scope': 'GOOGLE', 'types': ['tourist_attraction', 'museum', 'point_of_interest', 'establishment'], 'user_ratings_total': 5072, 'vicinity': 'Building 22, Charlestown Navy Yard, Charlestown'}}, {'clothing_store': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.3987431, 'lng': -71.0723234}, 'viewport': {'northeast': {'lat': 42.4003932802915, 'lng': -71.07072111970851}, 'southwest': {'lat': 42.3976953197085, 'lng': -71.07341908029152}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '3f45e56ad30ccef45ff7cd3046a77a79abf60b42', 'name': 'Target', 'opening_hours': {'open_now': True}, 'photos': [{'height': 2052, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/105117792274492423685">Kurt Kaiser</a>'], 'photo_reference': 'CmRaAAAAeBaF5uV1EBZ00RZbv1WRFyWc6hXv4KUzhlCAb229uS9thh1eWtxssQ-WCh1rBR6hTHWZXX_3xcGRXvrGtERQztjKx7mjKxqeRgt8LdcGHpGCIFd3ch99T0GM5b6pKg2wEhAJkRXG0zG-4_GC1TVNHQz-GhThLZQ-fJvLWL1EatXWwkPc9KA5Yg', 'width': 3530}], 'place_id': 'ChIJWy4oZRdx44kRZrKaYQ_4wzw', 'plus_code': {'compound_code': '9WXH+F3 Everett, Massachusetts, United States', 'global_code': '87JC9WXH+F3'}, 'price_level': 2, 'rating': 4, 'reference': 'ChIJWy4oZRdx44kRZrKaYQ_4wzw', 'scope': 'GOOGLE', 'types': ['department_store', 'grocery_or_supermarket', 'electronics_store', 'furniture_store', 'home_goods_store', 'food', 'point_of_interest', 'clothing_store', 'store', 'establishment'], 'user_ratings_total': 356, 'vicinity': '1 Mystic View Road, Everett'}}, {'clothing_store': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.3683819, 'lng': -71.0759296}, 'viewport': {'northeast': {'lat': 42.3697378302915, 'lng': -71.07463706970849}, 'southwest': {'lat': 42.3670398697085, 'lng': -71.07733503029151}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '1d0060d5e778146a0f8b38c001d5d602ebf053b4', 'name': 'Lids', 'opening_hours': {'open_now': True}, 'photos': [{'height': 4032, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/100865650654383704933">Taylor Nguyen</a>'], 'photo_reference': 'CmRaAAAABaUJFADPC3ku7jTufdHFQsUs_smvNLN5yGPI3S8lDRfXvuVR9tVPMVhmphEJLg5nAO6xpHFQ7r2SzZPAU2tFW4vRkt_BWvOrErvjg_dOYrgWTBWhvQsDeOptHuefL0FWEhCZYtlzDresSdL5ZVcxGMdRGhRPw9DzSQnSRONLspdOmC36brj4MA', 'width': 3024}], 'place_id': 'ChIJn9mkAb1w44kR-EVE2WVxzhA', 'plus_code': {'compound_code': '9W9F+9J Cambridge, Massachusetts, United States', 'global_code': '87JC9W9F+9J'}, 'price_level': 2, 'rating': 4.2, 'reference': 'ChIJn9mkAb1w44kR-EVE2WVxzhA', 'scope': 'GOOGLE', 'types': ['point_of_interest', 'clothing_store', 'store', 'establishment'], 'user_ratings_total': 74, 'vicinity': '100 Cambridgeside Place, Cambridge'}}, {'shoe_store': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.3681484, 'lng': -71.07614740000001}, 'viewport': {'northeast': {'lat': 42.36949738029149, 'lng': -71.0747984197085}, 'southwest': {'lat': 42.36679941970849, 'lng': -71.0774963802915}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': 'e64712207e7211dc6326289f31620227f6bae08e', 'name': 'Aldo shoes', 'opening_hours': {'open_now': True}, 'place_id': 'ChIJ26F3tL1w44kRxxwAducnlVU', 'plus_code': {'compound_code': '9W9F+7G Cambridge, Massachusetts, United States', 'global_code': '87JC9W9F+7G'}, 'price_level': 2, 'rating': 5, 'reference': 'ChIJ26F3tL1w44kRxxwAducnlVU', 'scope': 'GOOGLE', 'types': ['shoe_store', 'point_of_interest', 'store', 'establishment'], 'user_ratings_total': 4, 'vicinity': 'Cambridge'}}, {'clothing_store': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.3747406, 'lng': -71.1025355}, 'viewport': {'northeast': {'lat': 42.37622518029149, 'lng': -71.1012185697085}, 'southwest': {'lat': 42.37352721970849, 'lng': -71.10391653029151}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': 'c2b0c0fde5023f31c41c33905bb288975c370713', 'name': 'Walgreens', 'opening_hours': {'open_now': True}, 'photos': [{'height': 3024, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/105280564425448734885">Christian Ternus</a>'], 'photo_reference': 'CmRaAAAApZjaaU8UP442snh5TtzJ_2yNa9HFbdYRAZAkE67msQGSxbxHzBKaQ2WHnWBp39S2ZT-172xN6vb4nWUXJUWHSgzpuE1bUw_NVvOLCM2pH5SLRnC7w_1IrD382MW38ZA-EhBd7HMh3WhJpnQNH2JMQRw7GhRPGEQ_NSnUR3rMiRkGCJ4uIl1OAw', 'width': 4032}], 'place_id': 'ChIJn5py70t344kR9pmlP8HhsJk', 'plus_code': {'compound_code': '9VFW+VX Somerville, Massachusetts, United States', 'global_code': '87JC9VFW+VX'}, 'price_level': 2, 'rating': 3.4, 'reference': 'ChIJn5py70t344kR9pmlP8HhsJk', 'scope': 'GOOGLE', 'types': ['drugstore', 'convenience_store', 'food', 'health', 'point_of_interest', 'clothing_store', 'store', 'establishment'], 'user_ratings_total': 33, 'vicinity': '16 Beacon Street, Somerville'}}, {'university': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.366083, 'lng': -71.103323}, 'viewport': {'northeast': {'lat': 42.36745758029149, 'lng': -71.10200331970849}, 'southwest': {'lat': 42.3647596197085, 'lng': -71.10470128029151}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': '02a5d6e79f89bb417ef436804812fe928146bc92', 'name': 'ImprovBoston', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3840, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/114070455738368450545">ImprovBoston</a>'], 'photo_reference': 'CmRaAAAAP4ZnnStVqdDzAcZTy3b788UsLLM_L_2Phhind4MNvHbHoIgjJwLZr2OjGOIYPm4JiXgRo0XrxSGHxBQqOw6iKjv1UDy3Ui5GNawTvRsJ_lyOKPgUxwHXhzbHapJc2yK-EhCpoofeocQJCi_u28vJUp-mGhSSZJNHqYMG0Eh0gME53-YbHWaQ_Q', 'width': 5760}], 'place_id': 'ChIJi10xYFF344kRZnXGCIhQb9Y', 'plus_code': {'compound_code': '9V8W+CM Cambridge, Massachusetts, United States', 'global_code': '87JC9V8W+CM'}, 'price_level': 1, 'rating': 4.3, 'reference': 'ChIJi10xYFF344kRZnXGCIhQb9Y', 'scope': 'GOOGLE', 'types': ['university', 'point_of_interest', 'establishment'], 'user_ratings_total': 99, 'vicinity': '40 Prospect Street, Cambridge'}}, {'art': {'business_status': 'CLOSED_TEMPORARILY', 'geometry': {'location': {'lat': 42.3709361, 'lng': -71.11433199999999}, 'viewport': {'northeast': {'lat': 42.37231602989272, 'lng': -71.11294612010727}, 'southwest': {'lat': 42.36961637010728, 'lng': -71.11564577989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': '010e587fc34308997368f440cbb1abbfd4206490', 'name': 'OBERON - American Repertory Theater', 'permanently_closed': True, 'photos': [{'height': 735, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/113962125650074442208">OBERON</a>'], 'photo_reference': 'CmRaAAAAfRJ8TY6mZqdpvdGhWhQgIUPVWXhoqzf9D8d7i1mmZOSMKSYdYuqKmwHZHBWzpUJvfKFHw5ZPxMyVvAOLO-_3m5RPi44f7x38zRyzlEV28YRWmzu7eozkJuhKpe0Zm2fEEhDjZBEgRF_CUf_lbSHFTbKZGhShUov6yKz7gk3nou-K59OMEUV0MA', 'width': 1102}], 'place_id': 'ChIJ90bNT1t344kRZN_kditK6DE', 'plus_code': {'compound_code': '9VCP+97 Cambridge, Massachusetts, United States', 'global_code': '87JC9VCP+97'}, 'price_level': 2, 'rating': 4.7, 'reference': 'ChIJ90bNT1t344kRZN_kditK6DE', 'scope': 'GOOGLE', 'types': ['night_club', 'point_of_interest', 'establishment'], 'user_ratings_total': 371, 'vicinity': '2 Arrow St, Cambridge'}}, {'liquor_store': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.3736032, 'lng': -71.11977259999999}, 'viewport': {'northeast': {'lat': 42.3748441302915, 'lng': -71.1183919197085}, 'southwest': {'lat': 42.3721461697085, 'lng': -71.1210898802915}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '8b4bf091ad2005242a028262ada73b89eef2df42', 'name': "Cardullo's Gourmet Shoppe", 'opening_hours': {'open_now': True}, 'photos': [{'height': 4000, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/115832882436993992452">Sheraz Choudhary</a>'], 'photo_reference': 'CmRaAAAAhKnqDqPJfNzGjB58uFBK2-bQ5qD4veKsSa068kzkqToSHIWMyg7tnGzGcSVZa9JitU-zwMQ0_mMyK14ZzuT1PuLshdWWS7l-sF4DY-K1F59Fw4VamCw-xoCYAYAoGQGGEhDD_GKHwmz0zFLAOJY2PTzfGhQTgM52jomWLRQQAAZN8SpaX5g0nQ', 'width': 2992}], 'place_id': 'ChIJSWxaCGh344kRLAMX8a2nLbg', 'plus_code': {'compound_code': '9VFJ+C3 Cambridge, Massachusetts, United States', 'global_code': '87JC9VFJ+C3'}, 'price_level': 1, 'rating': 4.5, 'reference': 'ChIJSWxaCGh344kRLAMX8a2nLbg', 'scope': 'GOOGLE', 'types': ['grocery_or_supermarket', 'liquor_store', 'food', 'point_of_interest', 'store', 'establishment'], 'user_ratings_total': 156, 'vicinity': '6 Brattle Street, Cambridge'}}, {'cafe': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.3493581, 'lng': -71.07825869999999}, 'viewport': {'northeast': {'lat': 42.3508416802915, 'lng': -71.07724471970849}, 'southwest': {'lat': 42.3481437197085, 'lng': -71.07994268029151}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png', 'id': '60f3a45fd52be9f90b0c96f7b413db15deea2e29', 'name': 'Map Room Tea Lounge', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3600, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/114877805002402133627">Map Room Tea Lounge</a>'], 'photo_reference': 'CmRaAAAAHg1XyDuMAb5O2GP_othjUwnN_Jhvh9wV3s-0VWyE9CTSLeNkO21fpS6qlIN0P0trh1bJkH3hIaGBoBzAPPEoYQs3dodfEMXrrEUQ3qR0_pWWGfd6nAogOo_KderD2xJnEhBNhhBGast2jlahKTVJMojlGhSAgwIzOKkHmNculfZW7i9A4Iji3Q', 'width': 2400}], 'place_id': 'ChIJ0_a3Qgx644kRH4_DExyLsm0', 'plus_code': {'compound_code': '8WXC+PM Boston, Massachusetts, United States', 'global_code': '87JC8WXC+PM'}, 'price_level': 1, 'rating': 4.2, 'reference': 'ChIJ0_a3Qgx644kRH4_DExyLsm0', 'scope': 'GOOGLE', 'types': ['restaurant', 'cafe', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 46, 'vicinity': '230 Dartmouth Street, Boston'}}, {'bar': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.3444932, 'lng': -71.0714971}, 'viewport': {'northeast': {'lat': 42.3456811802915, 'lng': -71.07039081970849}, 'southwest': {'lat': 42.3429832197085, 'lng': -71.0730887802915}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png', 'id': '79734ce9649c2c53402033d922b20a7815c1848f', 'name': 'Beehive Restaurant', 'opening_hours': {'open_now': True}, 'photos': [{'height': 4000, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/105117167372898465095">Beehive Restaurant</a>'], 'photo_reference': 'CmRaAAAAWhcbgQ0t2s-hBlCQYCH7Fwz7x7mbKhgS-QHCVlSA8RM1rXrgzU6UMgHpPRxYWA2BtuiAxFnBN-GFhokjDBDAKAy0wUT1wzsBzatwgRx5FWVtEtqLmJZ6UVwhowIE6ZKXEhBYRsZeVpu8fTOjW2393UiuGhRrpap6T9BERmgh0z4dsf7CGjwkoQ', 'width': 6000}], 'place_id': 'ChIJWfpfeG1644kRLK4b9lMWmCI', 'plus_code': {'compound_code': '8WVH+QC Boston, Massachusetts, United States', 'global_code': '87JC8WVH+QC'}, 'price_level': 2, 'rating': 4.4, 'reference': 'ChIJWfpfeG1644kRLK4b9lMWmCI', 'scope': 'GOOGLE', 'types': ['night_club', 'bar', 'restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 2040, 'vicinity': '541 Tremont Street, Boston'}}, {'restaurant': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.344874, 'lng': -71.070494}, 'viewport': {'northeast': {'lat': 42.34615908029149, 'lng': -71.0690603697085}, 'southwest': {'lat': 42.3434611197085, 'lng': -71.0717583302915}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png', 'id': 'bf089c869131d0f86d7ee71962634b479138290f', 'name': 'Picco', 'opening_hours': {'open_now': True}, 'photos': [{'height': 3024, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/100966316525525117976">Stephen Jurgella</a>'], 'photo_reference': 'CmRaAAAAWOcgaJhfBJPfEvGu3xIlpaWRPUr_WIgYID-DmBs1gpPOU3xkw9_zn7ewdKY00e8pTJ7cK_tDtlUVaw2KXPvTigDNknsybkEvsk0OV6n-6HRefKx4skDZC2pNVOWNfEZKEhBToDTDm6laFM4ZH9FvziMSGhR9GkgXVMa425UDFeOg5mjBJrfY9A', 'width': 4032}], 'place_id': 'ChIJje0UgG1644kRcPWmLHHHZo4', 'plus_code': {'compound_code': '8WVH+WR Boston, Massachusetts, United States', 'global_code': '87JC8WVH+WR'}, 'price_level': 2, 'rating': 4.6, 'reference': 'ChIJje0UgG1644kRcPWmLHHHZo4', 'scope': 'GOOGLE', 'types': ['bar', 'restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 778, 'vicinity': '513 Tremont Street, Boston'}}, {'night_club': {'business_status': 'OPERATIONAL', 'geometry': {'location': {'lat': 42.350758, 'lng': -71.0662}, 'viewport': {'northeast': {'lat': 42.35212928029151, 'lng': -71.06477301970848}, 'southwest': {'lat': 42.34943131970851, 'lng': -71.06747098029149}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/bar-71.png', 'id': 'c86b837e99c7f31d114074fa290c981085d5e3b6', 'name': 'Venu Nightclub', 'opening_hours': {'open_now': False}, 'photos': [{'height': 1367, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/108753486908208893252">Venu Nightclub</a>'], 'photo_reference': 'CmRaAAAAFyKbENZMsjcnpAjogU7ZnrZawV_laPBINL7c0UueUk4IiYRe3W0z59-wxZPTD56LcuwriYdqtMJPl-F_HWcd-WhjYSUwwK4qz0S4TzGHZmsyKzocOzlXS8zjjJvvSvzLEhBoKiZhuqgBoo1v7y8qOaqTGhTIeSxJHowqKP9L16_r_A2KkJJRUg', 'width': 2048}], 'place_id': 'ChIJrwFDjXZ644kRXAx8THX9VjQ', 'plus_code': {'compound_code': '9W2M+8G Boston, Massachusetts, United States', 'global_code': '87JC9W2M+8G'}, 'price_level': 3, 'rating': 3.3, 'reference': 'ChIJrwFDjXZ644kRXAx8THX9VjQ', 'scope': 'GOOGLE', 'types': ['night_club', 'bar', 'point_of_interest', 'establishment'], 'user_ratings_total': 157, 'vicinity': '100 Warrenton Street, Boston'}}, {'history': {'business_status': 'CLOSED_TEMPORARILY', 'geometry': {'location': {'lat': 42.316274, 'lng': -71.0342146}, 'viewport': {'northeast': {'lat': 42.31735202989272, 'lng': -71.03274717010729}, 'southwest': {'lat': 42.31465237010728, 'lng': -71.03544682989272}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/library-71.png', 'id': '7093281ac5c64ac18b06da0dcd18f0d687110d0f', 'name': 'John F. Kennedy Presidential Library and Museum', 'permanently_closed': True, 'photos': [{'height': 1536, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/105726482695595407907">Mark Craig</a>'], 'photo_reference': 'CmRaAAAARDX4l2um9NgWfj1tSG4ODL5Y5Os5uVqC47PbRgGehpqYNl8a1hjq1d06ybmUg96wztSR5FhrUYHC43vzfBP7p497tOPuLKfHLMC3S5IPotBciFRGNcSiOo3T-PMtizdQEhB87eEBaBoJyrAuW6xmYcA_GhSrEEwODqFyPga8f10zIKQ9urSpww', 'width': 2048}], 'place_id': 'ChIJSQcpaOR644kRJF6XrwoOG5E', 'plus_code': {'compound_code': '8X88+G8 Boston, Massachusetts, United States', 'global_code': '87JC8X88+G8'}, 'price_level': 1, 'rating': 4.6, 'reference': 'ChIJSQcpaOR644kRJF6XrwoOG5E', 'scope': 'GOOGLE', 'types': ['library', 'tourist_attraction', 'museum', 'point_of_interest', 'establishment'], 'user_ratings_total': 405, 'vicinity': 'Columbia Point, Boston'}}]

